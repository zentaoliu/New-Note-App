# 学习记录软件（MVP）

一个纯前端的学习记录应用，支持针对正文片段添加备注并保持正文—备注—高亮三者联动。

## ✨ 功能概览

- 支持输入标题与正文内容（按行拆分为片段）。
- 文本选择后浮出操作条，可添加备注或查看/编辑备注。
- 每个片段仅允许一条备注，备注行只在有内容时显示。
- 点击正文片段或备注行时同步高亮，清晰对应关系。
- 备注支持编辑、删除，并提供操作反馈 toast。
- 数据自动保存到浏览器 `localStorage`，刷新后仍能保留。
- 支持简体与繁体中文混排。

## 🚀 启动方式

### ✅ 点开即用（无需任何命令）

1. 在文件管理器中打开项目文件夹。
2. 双击或右键选择“在浏览器中打开” `index.html`。
3. 页面将直接在默认浏览器中运行，所有交互功能（选择、备注、联动高亮、持久化等）均可使用。

> 提示：若浏览器阻止 `localStorage`，应用会自动回退到默认示例数据，仍可正常体验。推荐使用 Chrome、Edge、Firefox 等现代浏览器以获得完整能力。

### 🌐 可选：通过本地服务访问（保留原有方式）

如果你更习惯通过 `http://localhost` 访问，仍可在项目根目录执行以下任一命令（任选其一即可）：

```bash
# 使用内置的 Node 启动脚本（无需额外依赖）
npm install  # 首次运行可省略，此项目无依赖
npm start

# 或使用 Python 内置服务器
python3 -m http.server 5173

# 或使用 http-server（已全局安装或通过 npx 调用）
npx http-server -p 5173
```

运行后访问 <http://localhost:5173> 即可体验，与直接打开 `index.html` 的效果一致。

## 🧱 数据模型

```ts
interface Segment {
  id: string;
  text: string;
}

interface Note {
  id: string;
  segmentId: string;
  startOffset: number;
  endOffset: number;
  content: string;
  createdAt: string;
  updatedAt: string;
}
```

- 段落（片段）以行划分。
- 备注在同一片段内最多只有一条。
- `startOffset`、`endOffset` 记录选区范围（当前版本高亮整行，后续可按范围渲染）。

## ✅ 手动测试用例

1. **仅备注第三行片段**
   - 选择第三行文字的一段 → 点击“添加备注” → 输入内容保存。
   - 点击该行正文，高亮正文与备注行。
2. **删除备注**
   - 在备注行点击“删除” → 备注行消失 → 点击正文不再高亮。
3. **跨行选择**
   - 同时框选两行文字，弹出提示“请选择同一行文本”，不出现“添加备注”按钮。

## 📌 约束与说明

- 正文更新会重新生成片段并清空既有备注。
- 备注输入框支持 Enter 保存、Shift+Enter 换行，Esc 取消。
- 浮动操作条在滚动与调整窗口大小时自动跟随选区。
- 高亮当前以整行呈现（满足 MVP 需求）。

欢迎根据需求继续扩展，例如：多段备注、多人协作、云端同步等。
