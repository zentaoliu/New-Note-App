# 学习记录软件（MVP）

一个纯前端的学习记录应用，支持针对正文片段添加备注并保持正文—备注—高亮三者联动。

## ✨ 功能概览

- 支持输入标题与正文内容（按行拆分为片段）。
- 文本选择后浮出操作条，可添加备注或查看/编辑备注。
- 每个片段仅允许一条备注，备注行只在有内容时显示。
- 点击正文片段或备注行时同步高亮，清晰对应关系。
- 备注支持编辑、删除，并提供操作反馈 toast。
- 数据自动保存到浏览器 `localStorage`，刷新后仍能保留。
- 支持简体与繁体中文混排。

## 🚀 启动方式

项目为纯静态资源，可使用任意静态服务器运行，例如：

```bash
# 方式一：使用 Python 内置服务器
python3 -m http.server 5173

# 方式二：使用 Node.js（需本地已安装 http-server）
npx http-server -p 5173
```

然后访问 <http://localhost:5173> 即可体验。

> 直接双击 `index.html` 也可打开，但部分浏览器在 `file://` 协议下禁止 `localStorage`，推荐使用本地服务器。

## 🧱 数据模型

```ts
interface Segment {
  id: string;
  text: string;
}

interface Note {
  id: string;
  segmentId: string;
  startOffset: number;
  endOffset: number;
  content: string;
  createdAt: string;
  updatedAt: string;
}
```

- 段落（片段）以行划分。
- 备注在同一片段内最多只有一条。
- `startOffset`、`endOffset` 记录选区范围（当前版本高亮整行，后续可按范围渲染）。

## ✅ 手动测试用例

1. **仅备注第三行片段**
   - 选择第三行文字的一段 → 点击“添加备注” → 输入内容保存。
   - 点击该行正文，高亮正文与备注行。
2. **删除备注**
   - 在备注行点击“删除” → 备注行消失 → 点击正文不再高亮。
3. **跨行选择**
   - 同时框选两行文字，弹出提示“请选择同一行文本”，不出现“添加备注”按钮。

## 📌 约束与说明

- 正文更新会重新生成片段并清空既有备注。
- 备注输入框支持 Enter 保存、Shift+Enter 换行，Esc 取消。
- 浮动操作条在滚动与调整窗口大小时自动跟随选区。
- 高亮当前以整行呈现（满足 MVP 需求）。

欢迎根据需求继续扩展，例如：多段备注、多人协作、云端同步等。
